# ARM处理器有几种工作状态？分别是什么？

**两种工作状态**

1. ARM状态：32位，ARM状态执行字对齐的32位ARM指

2. Thumb状态，16位，执行半字对齐的16位Thumb指令。

# ARM处理器有几种运行模式？分别是什么？

**七种运行模式：**

1. 用户（user）模式

> 正常程序执行模式，大部分任务执行在这种模式下。用户模式是用户程序的工作模式。该没有权限去操作其它硬件资源，也不能切换到其它模式下。

2. 系统（system）模式

> 系统模式是特权模式，不受用户模式的限制。用户模式和系统模式共用一套寄存器，但比用户模式有更高的权限，可以访问所有系统资源及进行模式切换。

3. 一般中断（IRQ）模式 

> 一般中断模式也叫通用中断模式，用于处理一般的中断请求，通常在硬件产生中断信号之后自动进入该模式，该模式为特权模式，可以自由访问系统硬件资源。

4. 快速中断（FIQ）模式

> 快速中断模式是相对一般中断模式而言的，它是用来处理对时间要求比较紧急的中断请求，主要用于高速数据传输及通道处理中，其中断优先级相对普通中断更高。

5. 管理（supervisor）模式

> 管理模式是CPU上电后默认模式，因此在该模式下主要用来做系统的初始化，软中断处理也在该模式下。系统复位或开机、软中断时进入到SVC模式下。

6. 中止（abort）模式

> 中止模式用于支持虚拟内存或存储器保护，当用户程序访问非法地址，没有权限读取的内存地址时，会进入该模式。

7. 未定义（undefined）模式

> CPU在指令的译码阶段不能识别该指令操作时，会进入未定义模式，进行未定义陷阱处理。

# 中断优先级的实现方法有几种？分别是什么？

**两种实现方法：**

1. 硬件实现方法

> 就是为计算机系统配备一套能按优先等级对中断源进行排队的硬件电路，以保证级别高的中断能先于级别低的中断被处理器响应。
> 一般情况下，这个优先排队机构可能在处理器中有一套，在中断控制器中也有一套，甚至在接口电路中也会有一套。

2. 软件实现方法

> 就是把所有中断源的中断请求信号分成两路，其中一路经“或”逻辑送到处理器的中断请求输入端，而另一路则送入中断接口电路经数据总线送入处理器。

# ARM的快中断采用了几种措施来保证，这些措施是什么？

**两种措施：**

1. 为快中断配置了较多的私有寄存器

> 专门为快中断配置了较多的私有寄存器，从而可使中断服务程序有足够的寄存器来使用，而不必与被中断服务程序使用同一组寄存器，这样就免去了因寄存器冲突而必需的保护及恢复现场工作。

2. 中断向量位置的特殊处理

> ARM把FIQ的中断向量放在了中断（异常）向量表末尾0X0000001C处，因此它后面没有其它中断向量，允许用户将中断服务程序直接放在这里。
>
> 只有当CPSR中相应的F位被清零时，才可能发生FIQ异常。
> 将ARM内核的nFIQ信号拉低，可实现外部产生FIQ，FIQ异常是优先级最高的外部中断。内核进入FIQ处理程序之后，FIQ、IRQ同时禁止任何外部中断源再次发生中断，除非在软件中重新使能IRQ、FIQ请求。
> 当F控制位被清零时，ARM在每条指令执行结束时检测FIQ同步器输出端的低电平。

